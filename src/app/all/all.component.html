<header class="row header">
	
	<div class='row'>
		<button mat-raised-button color="primary" (click)='menuQuickFiltersView = !menuQuickFiltersView'>Quick Filters</button>
		<button mat-raised-button color="primary" (click)='menuSearchView = !menuSearchView'>Search</button>
		<button mat-raised-button color="primary" (click)='menuLocationView = !menuLocationView'>Locations</button>
		<button mat-raised-button color="primary" (click)='menuPricingView = !menuPricingView'>Pricing</button>
		<button mat-raised-button color="primary" (click)='menuSortView = !menuSortView'>Sort</button>
	</div>
	
	<div id="quick-filters" class='row' *ngIf="menuQuickFiltersView">
			<button class="btn-quick-all" mat-raised-button color="accent" (click)="sortByAll()">Show All</button>	
			<button mat-button class="quick-sales" mat-raised-button (click)="sort('Sales')" >Sales<span class="sort-count">(##)</span></button>		
			<mat-divider></mat-divider>
			Location:
			<button class="btn-quick-all" mat-raised-button color="accent" (click)="distance(1)">D-1</button>		
			<button class="btn-quick-all" mat-raised-button color="accent" (click)="distance(2)">D-2</button>		
			<button class="btn-quick-all" mat-raised-button color="accent" (click)="distance(3)">D-3</button>		
			<button class="btn-quick-all" mat-raised-button color="accent" (click)="distance(3)">D-3</button>		
			<mat-divider ></mat-divider>
			Strains: <button *ngFor='let item of sortStrainMap' mat-button (click)="sort(item.name, 'strain')" class="quick-strain-sort" [ngClass]='{"active": item.active}'>{{item.name}} <span class="sort-count">({{item.count}})</span></button>
			<mat-divider></mat-divider>
			Types: <button *ngFor='let item of sortTypeMap' mat-button (click)="sort(item.name, 'type')" class="quick-type-sort" [ngClass]='{"active": item.active}'>{{item.name}} <span class="sort-count">({{item.count}})</span></button>
			<!-- <button mat-button class="quick-sort" mat-raised-button (click)="sort('shatter')" >Shatter<span class="sort-count">(##)</span></button>		
			<button mat-button class="quick-sort" mat-raised-button (click)="sort('live resin')" >Live Resin<span class="sort-count">(##)</span></button> -->
	</div>
	
	<div id="search" class='row' *ngIf="menuSearchView">
			<mat-form-field class="search-form-field">
				<div class="search-cont">
					<input matInput type="text" [(ngModel)]='search' (keyup)="doSearch($event)">
					<button mat-button matSuffix mat-icon-button aria-label="Clear" (click)="search='';sortByAll()"><mat-icon>close</mat-icon></button>
					<button class="btn-search" mat-button (click)="doSearch($event)"><mat-icon>search</mat-icon></button>
				</div>
			</mat-form-field>
	</div>
	
	<div id="location" class='row' *ngIf="menuLocationView">
		<mat-form-field id="select-dispensary" appearance="fill">
			<mat-label>Location...</mat-label>
			<mat-select [formControl]="dispensary" multiple (selectionChange)="sortByDispensary($event)">
				<mat-option *ngFor="let dispensary of dispensaryList" [value]="dispensary.value">{{dispensary.name}}</mat-option>
			</mat-select>
		</mat-form-field>		
	</div>
	
	<div id="pricing" class='row col s12 m2 l2 xl2' *ngIf="menuPricingView">
		<ngx-slider [(value)]="minValue" [(highValue)]="maxValue" [options]="soptions" (valueChange)="sortByCostLow($event)" (highValueChange)="sortByCostHigh($event)" (userChangeEnd)="sortByCost(e)"></ngx-slider>		
	</div>
	
	<div id="sort" class='row col s12 m2 l2 xl2' *ngIf="menuSortView">
			<button mat-raised-button color="accent" >High</button>	
			<button mat-raised-button color="accent" >Low</button>	
	</div>

	<!-- <div id="quick-filters" class="col s12 m12 l6 xl6">
		<button class="btn-quick-all" mat-raised-button color="accent" (click)="sortByAll()">All</button>		
		<button class="btn-quick-all" mat-raised-button color="accent" (click)="distance(1)">D-1</button>		
		<button class="btn-quick-all" mat-raised-button color="accent" (click)="distance(2)">D-2</button>		
		<button class="btn-quick-all" mat-raised-button color="accent" (click)="distance(3)">D-3</button>		
		<button *ngFor='let item of sortMap' mat-button (click)="sort(item.name)" [ngClass]='{"quick-sales": item.type == "quick-sales", "quick-sort": item.type == "quick-sort", "active": item.active}'>{{item.name}} <span class="sort-count">({{item.count}})</span></button>
	</div>
	 -->
	<!-- <div class="search col s12 m12 l6 xl3">
		<div>
			<mat-form-field class="search-form-field">
				<div class="search-cont">
					<input matInput type="text" [(ngModel)]='search' (keyup)="doSearch($event)">
					<button mat-button matSuffix mat-icon-button aria-label="Clear" (click)="search='';sortByAll()"><mat-icon>close</mat-icon></button>
					<button class="btn-search" mat-button (click)="doSearch($event)"><mat-icon>search</mat-icon></button>
				</div>
			</mat-form-field>
		</div>
	</div> -->

	<!-- <div class="col s12 m12 l6 xl3">
		<mat-form-field id="select-dispensary" appearance="fill">
			<mat-label>Location...</mat-label>
			<mat-select [formControl]="dispensary" multiple (selectionChange)="sortByDispensary($event)">
				<mat-option *ngFor="let dispensary of dispensaryList" [value]="dispensary.value">{{dispensary.name}}</mat-option>
			</mat-select>
		</mat-form-field>

	</div> -->



</header>

<section class="row">
	<!-- <div class="col s1 m1 l1 xl1">
		<mat-chip-list>
			<div *ngFor='let item of sortMap'>
				<mat-chip [selectable]="selectable" [removable]="removable" *ngIf='item.active == true'>{{item.name}}
					<mat-icon matChipRemove (click)="removeSortChip(item.name)">cancel</mat-icon>
				</mat-chip>
			</div>
		</mat-chip-list>
	</div> -->
	<!-- <div class="col s12 m2 l2 xl2">
		<ngx-slider [(value)]="minValue" [(highValue)]="maxValue" [options]="soptions" (valueChange)="sortByCostLow($event)" (highValueChange)="sortByCostHigh($event)" (userChangeEnd)="sortByCost(e)"></ngx-slider>
	</div>-->
	<div class="col s12 m10 lm10 xl10">
		<mat-paginator *ngIf='!loading' [length]="productCount" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions" (page)="pageEvent = handlePage($event)"> </mat-paginator>
	</div> 
</section>

<section class="row">
	<div id="loading" *ngIf='loading'><h1>Loading...</h1></div>
	<div class="mat-card col s12 m6 l4 xl3" *ngFor="let product of products">

		<div class="product" [style.background-image]="'url('+product.Image+')'">
			<h1 class="product-name">{{ product.Name }}</h1>
			<h4 *ngIf='product.apiRoot != "kaleafa"' class="product-type">{{ product.brandName }}</h4>
			<h4 *ngIf='product.apiRoot == "kaleafa"'class="product-type">{{ product.brandName }} / {{ product.type }} </h4>
			
			<div class="col s6 m6 l6">
				<h6>{{ product.DispensaryID | dispensary }}</h6>

				<!-- no sale -->
				<h2 *ngIf="product.recSpecialPrices[0] == null"><strong>${{ product.Prices[0] }}</strong></h2>
				<h3 class="sale-price" *ngIf="product.recSpecialPrices.length >= 1"><strong>Sale:</strong> ${{ product.recSpecialPrices[0] }}</h3>
				<h4 class="percentoff" *ngIf="product.recSpecialPrices.length >= 1"><span>Save:</span> {{ product.discount }}</h4>
				<!-- sale -->
				<h4 class="regular-price" *ngIf="product.recSpecialPrices[0] != null">Was: ${{ product.Prices[0] }}</h4>

				<div class="power">
					<h5 *ngIf="product.THCContent?.value">THC: <strong>{{ product.THCContent.value }}{{ product.THCContent.unit | unit }}</strong></h5>
					<h5 *ngIf="product.CBDContent?.value">CBD: <strong>{{ product.CBDContent.value }}{{ product.CBDContent.unit | unit }}</strong></h5>
				</div>
				<h5 class="cart-quantity" *ngIf="product.maxCartQuantity"><strong>{{ product.maxCartQuantity }}</strong> available</h5>
			</div>
			<!-- <div class="details-column col s6 m6 l6"></div> -->


		</div>
	</div>
</section>

<mat-paginator *ngIf='!loading' [length]="productCount" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions" (page)="pageEvent = handlePage($event)">
</mat-paginator>
